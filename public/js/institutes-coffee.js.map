{"version":3,"sources":["institutes-coffee.coffee"],"names":[],"mappings":"AAAA;AAAA,MAAA;;EAAA,UAAA,GAAa;;EACb,QAAA,GAAW;;EAEX,aAAA,GAAgB,SAAA;WACd,CAAC,CAAC,IAAF,CAAO,iBAAP,EACE;MAAA,OAAA,EAAW,SAAC,MAAD;QACT,UAAA,GAAa,IAAI,CAAC,KAAL,CAAW,MAAX;eACb,eAAA,CAAA;MAFS,CAAX;MAGA,KAAA,EAAW,SAAC,KAAD;eAAW,KAAA,CAAM,KAAN;MAAX,CAHX;KADF;EADc;;EAOhB,WAAA,GAAc,SAAC,EAAD;WACZ,CAAC,CAAC,IAAF,CAAO,iBAAA,GAAoB,EAApB,GAAyB,WAAhC,EACE;MAAA,OAAA,EAAW,SAAC,MAAD;QACT,QAAA,GAAW,IAAI,CAAC,KAAL,CAAW,MAAX;eACX,aAAA,CAAc,EAAd;MAFS,CAAX;MAGA,KAAA,EAAW,SAAC,KAAD;eAAW,KAAA,CAAM,KAAN;MAAX,CAHX;KADF;EADY;;EAQd,eAAA,GAAkB,SAAA;AAChB,QAAA;AAAA;SAAA,4CAAA;;MACE,YAAA,GAAe,uCAAA,GAA0C,QAAQ,CAAC,EAAnD,GAAwD,WAAxD,GACH,QAAQ,CAAC,IADN,GACa,yDADb,GAE+B,QAAQ,CAAC,EAFxC,GAE6C;MAC5D,CAAA,CAAE,aAAF,CAAgB,CAAC,MAAjB,CAAwB,YAAxB;mBAEA,WAAA,CAAY,QAAQ,CAAC,EAArB;AANF;;EADgB;;EAUlB,aAAA,GAAgB,SAAC,EAAD;AACd,QAAA;IAAA,WAAA,GAAc,CAAA,CAAE,sBAAA,GAAwB,EAAxB,GAA6B,GAA/B;AACd,SAAA,0CAAA;;MACE,UAAA,GAAa,mCAAA,GAAsC,IAAI,CAAC,EAA3C,GAAgD,WAAhD,GACa,IAAI,CAAC,IADlB,GACyB,+EADzB,GAGuB,IAAI,CAAC,EAH5B,GAGiC;MAE9C,WAAW,CAAC,MAAZ,CAAmB,UAAnB;AANF;IAOA,aAAA,CAAA;WACA,mBAAA,CAAA;EAVc;;EAahB,aAAA,GAAgB,SAAA;WACd,CAAA,CAAE,YAAF,CAAe,CAAC,EAAhB,CAAmB,OAAnB,EAA4B,SAAC,CAAD;MAC1B,MAAM,CAAC,QAAQ,CAAC,IAAhB,GAAuB,gBAAA,GAAmB,CAAA,CAAE,IAAF,CAAO,CAAC,IAAR,CAAa,QAAb;aAC1C,CAAC,CAAC,cAAF,CAAA;IAF0B,CAA5B;EADc;;EAMhB,mBAAA,GAAsB,SAAA;WACpB,CAAA,CAAE,YAAF,CAAe,CAAC,EAAhB,CAAmB,OAAnB,EAA4B,SAAA;AAC1B,UAAA;MAAA,WAAA,GAAc,sBAAA,GAAwB,CAAA,CAAE,IAAF,CAAO,CAAC,IAAR,CAAa,cAAb,CAAxB,GAAuD;MAErE,IAAG,CAAA,CAAE,WAAF,CAAc,CAAC,EAAf,CAAkB,SAAlB,CAAH;eACE,CAAA,CAAE,WAAF,CAAc,CAAC,IAAf,CAAA,EADF;OAAA,MAAA;eAGE,CAAA,CAAE,WAAF,CAAc,CAAC,IAAf,CAAA,EAHF;;IAH0B,CAA5B;EADoB;;EAUtB,CAAA,CAAE,SAAA;WACA,aAAA,CAAA;EADA,CAAF;AAzDA","file":"institutes-coffee.js","sourcesContent":["institutes = ''\nprofiles = ''\n\ngetInstitutes = () ->\n  $.ajax '/api/institutes',\n    success  : (result) ->\n      institutes = JSON.parse(result)\n      appendInstitute()\n    error    : (error) -> alert(error)\n\ngetProfiles = (id) ->\n  $.ajax '/api/institute/' + id + '/profiles',\n    success  : (result) ->\n      profiles = JSON.parse(result)\n      appendProfile(id)\n    error    : (error) -> alert(error)\n\n\nappendInstitute = ->\n  for dataItem in institutes\n    newInstitute = '<div class=\"institute\" institute-id=\"' + dataItem.id + '\">\n      <span>' + dataItem.name + '</span> </div>\n      <div hidden class=\"profiles\" parent-id=\"' + dataItem.id + '\"></div>'\n    $('.institutes').append(newInstitute)\n\n    getProfiles(dataItem.id)\n\n\nappendProfile = (id) ->\n  profilesDiv = $('.profiles[parent-id='+ id + ']')\n  for item in profiles\n    newProfile = '<div class=\"profile\" profile-id=\"' + item.id + '\">\n                    <span>' + item.name + '</span></br>\n                    <button class=\"tyle-btn\">Учебные планы</button>\n                    <button btn-id=\"' + item.id + '\" class=\"goToGroup tyle-btn tyle-btn-negative\">Перейти к группам</button>\n                </div>'\n    profilesDiv.append(newProfile)\n  signBtnEvents()\n  signInstituteEvents()\n\n\nsignBtnEvents = ->\n  $('.goToGroup').on('click', (e) ->\n    window.location.href = '/admin/groups/' + $(this).attr('btn-id')\n    e.preventDefault()\n  )\n\nsignInstituteEvents = () ->\n  $('.institute').on('click', ->\n    profilesDiv = '.profiles[parent-id='+ $(this).attr('institute-id') + ']';\n\n    if $(profilesDiv).is(':hidden')\n      $(profilesDiv).show()\n    else\n      $(profilesDiv).hide()\n  )\n\n$ ->\n  getInstitutes()"]}