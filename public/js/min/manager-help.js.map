{"version":3,"sources":["wheelzoom.js","help.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"manager-help.js","sourcesContent":["/*!\r\n\tWheelzoom 3.0.4\r\n\tlicense: MIT\r\n\thttp://www.jacklmoore.com/wheelzoom\r\n*/\r\nwindow.wheelzoom = (function(){\r\n\tvar defaults = {\r\n\t\tzoom: 0.10\r\n\t};\r\n\r\n\tvar canvas = document.createElement('canvas');\r\n\r\n\tvar main = function(img, options){\r\n\t\tif (!img || !img.nodeName || img.nodeName !== 'IMG') { return; }\r\n\r\n\t\tvar settings = {};\r\n\t\tvar width;\r\n\t\tvar height;\r\n\t\tvar bgWidth;\r\n\t\tvar bgHeight;\r\n\t\tvar bgPosX;\r\n\t\tvar bgPosY;\r\n\t\tvar previousEvent;\r\n\t\tvar cachedDataUrl;\r\n\r\n\t\tfunction setSrcToBackground(img) {\r\n\t\t\timg.style.backgroundImage = 'url(\"'+img.src+'\")';\r\n\t\t\timg.style.backgroundRepeat = 'no-repeat';\r\n\t\t\tcanvas.width = img.naturalWidth;\r\n\t\t\tcanvas.height = img.naturalHeight;\r\n\t\t\tcachedDataUrl = canvas.toDataURL();\r\n\t\t\timg.src = cachedDataUrl;\r\n\t\t}\r\n\r\n\t\tfunction updateBgStyle() {\r\n\t\t\tif (bgPosX > 0) {\r\n\t\t\t\tbgPosX = 0;\r\n\t\t\t} else if (bgPosX < width - bgWidth) {\r\n\t\t\t\tbgPosX = width - bgWidth;\r\n\t\t\t}\r\n\r\n\t\t\tif (bgPosY > 0) {\r\n\t\t\t\tbgPosY = 0;\r\n\t\t\t} else if (bgPosY < height - bgHeight) {\r\n\t\t\t\tbgPosY = height - bgHeight;\r\n\t\t\t}\r\n\r\n\t\t\timg.style.backgroundSize = bgWidth+'px '+bgHeight+'px';\r\n\t\t\timg.style.backgroundPosition = bgPosX+'px '+bgPosY+'px';\r\n\t\t}\r\n\r\n\t\tfunction reset() {\r\n\t\t\tbgWidth = width;\r\n\t\t\tbgHeight = height;\r\n\t\t\tbgPosX = bgPosY = 0;\r\n\t\t\tupdateBgStyle();\r\n\t\t}\r\n\r\n\t\tfunction onwheel(e) {\r\n\t\t\tvar deltaY = 0;\r\n\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\tif (e.deltaY) { // FireFox 17+ (IE9+, Chrome 31+?)\r\n\t\t\t\tdeltaY = e.deltaY;\r\n\t\t\t} else if (e.wheelDelta) {\r\n\t\t\t\tdeltaY = -e.wheelDelta;\r\n\t\t\t}\r\n\r\n\t\t\t// As far as I know, there is no good cross-browser way to get the cursor position relative to the event target.\r\n\t\t\t// We have to calculate the target element's position relative to the document, and subtrack that from the\r\n\t\t\t// cursor's position relative to the document.\r\n\t\t\tvar rect = img.getBoundingClientRect();\r\n\t\t\tvar offsetX = e.pageX - rect.left - window.pageXOffset;\r\n\t\t\tvar offsetY = e.pageY - rect.top - window.pageYOffset;\r\n\r\n\t\t\t// Record the offset between the bg edge and cursor:\r\n\t\t\tvar bgCursorX = offsetX - bgPosX;\r\n\t\t\tvar bgCursorY = offsetY - bgPosY;\r\n\t\t\t\r\n\t\t\t// Use the previous offset to get the percent offset between the bg edge and cursor:\r\n\t\t\tvar bgRatioX = bgCursorX/bgWidth;\r\n\t\t\tvar bgRatioY = bgCursorY/bgHeight;\r\n\r\n\t\t\t// Update the bg size:\r\n\t\t\tif (deltaY < 0) {\r\n\t\t\t\tbgWidth += bgWidth*settings.zoom;\r\n\t\t\t\tbgHeight += bgHeight*settings.zoom;\r\n\t\t\t} else {\r\n\t\t\t\tbgWidth -= bgWidth*settings.zoom;\r\n\t\t\t\tbgHeight -= bgHeight*settings.zoom;\r\n\t\t\t}\r\n\r\n\t\t\t// Take the percent offset and apply it to the new size:\r\n\t\t\tbgPosX = offsetX - (bgWidth * bgRatioX);\r\n\t\t\tbgPosY = offsetY - (bgHeight * bgRatioY);\r\n\r\n\t\t\t// Prevent zooming out beyond the starting size\r\n\t\t\tif (bgWidth <= width || bgHeight <= height) {\r\n\t\t\t\treset();\r\n\t\t\t} else {\r\n\t\t\t\tupdateBgStyle();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction drag(e) {\r\n\t\t\te.preventDefault();\r\n\t\t\tbgPosX += (e.pageX - previousEvent.pageX);\r\n\t\t\tbgPosY += (e.pageY - previousEvent.pageY);\r\n\t\t\tpreviousEvent = e;\r\n\t\t\tupdateBgStyle();\r\n\t\t}\r\n\r\n\t\tfunction removeDrag() {\r\n\t\t\tdocument.removeEventListener('mouseup', removeDrag);\r\n\t\t\tdocument.removeEventListener('mousemove', drag);\r\n\t\t}\r\n\r\n\t\t// Make the background draggable\r\n\t\tfunction draggable(e) {\r\n\t\t\te.preventDefault();\r\n\t\t\tpreviousEvent = e;\r\n\t\t\tdocument.addEventListener('mousemove', drag);\r\n\t\t\tdocument.addEventListener('mouseup', removeDrag);\r\n\t\t}\r\n\r\n\t\tfunction load() {\r\n\t\t\tif (img.src === cachedDataUrl) return;\r\n\r\n\t\t\tvar computedStyle = window.getComputedStyle(img, null);\r\n\r\n\t\t\twidth = parseInt(computedStyle.width, 10);\r\n\t\t\theight = parseInt(computedStyle.height, 10);\r\n\t\t\tbgWidth = width;\r\n\t\t\tbgHeight = height;\r\n\t\t\tbgPosX = 0;\r\n\t\t\tbgPosY = 0;\r\n\r\n\t\t\tsetSrcToBackground(img);\r\n\r\n\t\t\timg.style.backgroundSize =  width+'px '+height+'px';\r\n\t\t\timg.style.backgroundPosition = '0 0';\r\n\t\t\timg.addEventListener('wheelzoom.reset', reset);\r\n\r\n\t\t\timg.addEventListener('wheel', onwheel);\r\n\t\t\timg.addEventListener('mousedown', draggable);\r\n\t\t}\r\n\r\n\t\tvar destroy = function (originalProperties) {\r\n\t\t\timg.removeEventListener('wheelzoom.destroy', destroy);\r\n\t\t\timg.removeEventListener('wheelzoom.reset', reset);\r\n\t\t\timg.removeEventListener('load', load);\r\n\t\t\timg.removeEventListener('mouseup', removeDrag);\r\n\t\t\timg.removeEventListener('mousemove', drag);\r\n\t\t\timg.removeEventListener('mousedown', draggable);\r\n\t\t\timg.removeEventListener('wheel', onwheel);\r\n\r\n\t\t\timg.style.backgroundImage = originalProperties.backgroundImage;\r\n\t\t\timg.style.backgroundRepeat = originalProperties.backgroundRepeat;\r\n\t\t\timg.src = originalProperties.src;\r\n\t\t}.bind(null, {\r\n\t\t\tbackgroundImage: img.style.backgroundImage,\r\n\t\t\tbackgroundRepeat: img.style.backgroundRepeat,\r\n\t\t\tsrc: img.src\r\n\t\t});\r\n\r\n\t\timg.addEventListener('wheelzoom.destroy', destroy);\r\n\r\n\t\toptions = options || {};\r\n\r\n\t\tObject.keys(defaults).forEach(function(key){\r\n\t\t\tsettings[key] = options[key] !== undefined ? options[key] : defaults[key];\r\n\t\t});\r\n\r\n\t\tif (img.complete) {\r\n\t\t\tload();\r\n\t\t}\r\n\r\n\t\timg.addEventListener('load', load);\r\n\t};\r\n\r\n\t// Do nothing in IE8\r\n\tif (typeof window.getComputedStyle !== 'function') {\r\n\t\treturn function(elements) {\r\n\t\t\treturn elements;\r\n\t\t};\r\n\t} else {\r\n\t\treturn function(elements, options) {\r\n\t\t\tif (elements && elements.length) {\r\n\t\t\t\tArray.prototype.forEach.call(elements, main, options);\r\n\t\t\t} else if (elements && elements.nodeName) {\r\n\t\t\t\tmain(elements, options);\r\n\t\t\t}\r\n\t\t\treturn elements;\r\n\t\t};\r\n\t}\r\n}());","$(document).ready(function(){\r\n    var helpViewModel = function(){\r\n        return new function(){\r\n            var self = this;\r\n\r\n            initializeViewModel.call(self, {\r\n                page: menu.admin.main\r\n            });\r\n\r\n            self.current = {\r\n                image: ko.observable()\r\n            };\r\n\r\n            self.actions = {\r\n                expand: function(data, e){\r\n                    self.current.image($(e.currentTarget).attr('src'));\r\n                    $('.image-expander').fadeIn();\r\n                    wheelzoom(document.querySelector('img.zoom'));\r\n                },\r\n                hide: function () {\r\n                    $('.image-expander').fadeOut();\r\n                    document.querySelector('img.zoom')\r\n                        .dispatchEvent(new CustomEvent('wheelzoom.destroy'));\r\n                }\r\n            };\r\n            \r\n            return returnStandart.call(self);\r\n        };\r\n    };\r\n\r\n    ko.applyBindings(helpViewModel());\r\n});"]}