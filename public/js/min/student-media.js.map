{"version":3,"sources":["media.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"student-media.js","sourcesContent":["$(document).ready(function () {\r\n    var mediaViewModel = function () {\r\n        return new function () {\r\n            var self = this;\r\n\r\n            initializeViewModel.call(self, {page: ''});\r\n\r\n            self.media = ko.observable({\r\n                id: ko.observable(0),\r\n                type: ko.observable(''),\r\n                content: ko.observable(''),\r\n                path: ko.observable(''),\r\n                name: ko.observable(''),\r\n                hash: ko.observable('')\r\n            });\r\n\r\n            self.name = ko.observable('');\r\n            self.anchor = ko.observable('');\r\n\r\n            self.initialize = function () {\r\n                $('body').addClass('media');\r\n            };\r\n\r\n\r\n            self.fill = function (data) {\r\n                self.media()\r\n                    .id(data.id())\r\n                    .type(data.type())\r\n                    .content(data.content())\r\n                    .path(data.path())\r\n                    .name(data.name())\r\n                    .hash(data.hash());\r\n            };\r\n\r\n            self.getMedia = function () {\r\n                var mediaId;\r\n                var currentUrl = window.location.href;\r\n                var urlParts = currentUrl.split('/');\r\n                if (urlParts[urlParts.length-1].indexOf('#') != -1) {\r\n                    mediaId = urlParts[urlParts.length-1].split('#')[0];\r\n                    self.anchor(urlParts[urlParts.length-1].split('#')[1]);\r\n                }\r\n                else mediaId = +urlParts[urlParts.length-1];\r\n\r\n                $ajaxget({\r\n                    url: '/api/media/' + mediaId,\r\n                    errors: self.errors,\r\n                    successCallback: function(data){\r\n                        self.fill(data);\r\n                        self.name(data.name().substring(0, data.name().lastIndexOf('.')));\r\n                        document.title = self.name();\r\n                    }\r\n                });\r\n            };\r\n\r\n            self.goToAnchor = function () {\r\n                if (self.anchor().length > 0 && $('#' + self.anchor()).length) {\r\n                    $('html, body').animate({\r\n                        scrollTop: $('#' + self.anchor()).offset().top\r\n                    }, 0);\r\n                }\r\n\r\n            };\r\n\r\n            self.initialize();\r\n            self.getMedia();\r\n\r\n            ko.bindingHandlers.afterHtmlRender = {\r\n                update: function(element, valueAccessor, allBindings){\r\n                    allBindings().html && valueAccessor()(allBindings().html());\r\n                }\r\n            };\r\n\r\n        };\r\n    };\r\n\r\n    ko.applyBindings(mediaViewModel());\r\n});\r\n"]}