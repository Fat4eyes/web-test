{"version":3,"sources":["login.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"login.js","sourcesContent":["$(document).ready(function(){\n\n    var loginViewModel = function(){\n        return new function(){\n            var self = this;\n\n            self.errors = modals('errors');\n\n            self.user = {\n                email: ko.observable(''),\n                password: ko.observable('')\n            };\n            self.enter = function(data, e){\n                if (e.which === 13)\n                    self.login();\n            };\n            self.login = function(){\n                var json = ko.mapping.toJSON(self.user);\n\n                var requestParams = {\n                    url: '/login',\n                    data: json,\n                    errors: self.errors,\n                    successCallback: function(data){\n                        var location = '/login';\n                        switch (data()){\n                            case role.student.name:\n                                location = role.student.location;\n                                break;\n                            case role.admin.name:\n                                location = role.admin.location;\n                                break;\n                            case role.lecturer.name:\n                                location = role.lecturer.location;\n                                break;\n                        }\n                        window.location.href = location;\n                    },\n                    errorCallback: function(){\n                        self.user.password(\"\");\n                    }\n                };\n\n                $ajaxpost(requestParams);\n            };\n\n            return {\n                user: self.user,\n                login: self.login,\n                enter: self.enter,\n                errors: self.errors\n            };\n        };\n    };\n\n    ko.applyBindings(loginViewModel());\n});"]}