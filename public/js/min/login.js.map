{"version":3,"sources":["login.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"login.js","sourcesContent":["$(document).ready(function(){\r\n\r\n    var loginViewModel = function(){\r\n        return new function(){\r\n            var self = this;\r\n\r\n            self.errors = modals('errors');\r\n\r\n            self.user = {\r\n                email: ko.observable(''),\r\n                password: ko.observable('')\r\n            };\r\n            self.enter = function(data, e){\r\n                if (e.which === 13)\r\n                    self.login();\r\n            };\r\n            self.login = function(){\r\n                var json = ko.mapping.toJSON(self.user);\r\n\r\n                var requestParams = {\r\n                    url: '/login',\r\n                    data: json,\r\n                    errors: self.errors,\r\n                    successCallback: function(data){\r\n                        var location = '/login';\r\n                        switch (data()){\r\n                            case role.student.name:\r\n                                location = role.student.location;\r\n                                break;\r\n                            case role.admin.name:\r\n                                location = role.admin.location;\r\n                                break;\r\n                            case role.lecturer.name:\r\n                                location = role.lecturer.location;\r\n                                break;\r\n                        }\r\n                        window.location.href = location;\r\n                    },\r\n                    errorCallback: function(){\r\n                        self.user.password(\"\");\r\n                    }\r\n                };\r\n\r\n                $ajaxpost(requestParams);\r\n            };\r\n\r\n            return {\r\n                user: self.user,\r\n                login: self.login,\r\n                enter: self.enter,\r\n                errors: self.errors\r\n            };\r\n        };\r\n    };\r\n\r\n    ko.applyBindings(loginViewModel());\r\n});"]}